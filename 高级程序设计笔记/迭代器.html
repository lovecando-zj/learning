<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      //[Symbol.iterator]是迭代器工厂函数
      //迭代器[Symbol.iterator](),可调用next()执行迭代，
//       迭代器并不与可迭代对象某个时刻的快照绑定，而仅仅是使用游标来记录遍历可迭代对象的历程。
// 如果可迭代对象在迭代期间被修改了，那么迭代器也会反映相应的变化：

      //任何实现 Iterable 接口的数据结构都可以被实现 Iterator 接口的结构“消费”（consume）。
      //   迭代器（iterator）是按需创建的一次性对象。
      //   每个迭代器都会关联一个可迭代对象，而迭代器会暴露迭代其关联可迭代对象的 API
      // 检查是否存在默认迭代器属性可以暴露这个工厂函数：
      let num = 1;
      let obj = {};
      // 这两种类型没有实现迭代器工厂函数
      console.log(num[Symbol.iterator]); // undefined
      console.log(obj[Symbol.iterator]); // undefined
      let str = "abc";
      let arr = ["a", "b", "c"];
      let map = new Map().set("a", 1).set("b", 2).set("c", 3);
      let set = new Set().add("a").add("b").add("c");
      let els = document.querySelectorAll("div");
      // 这些类型都实现了迭代器工厂函数
      console.log(str[Symbol.iterator]); // f values() { [native code] }
      console.log(arr[Symbol.iterator]); // f values() { [native code] }
      console.log(map[Symbol.iterator]); // f values() { [native code] }
      console.log(set[Symbol.iterator]); // f values() { [native code] }
      console.log(els[Symbol.iterator]); // f values() { [native code] }
      // 调用这个工厂函数会生成一个迭代器
      console.log(str[Symbol.iterator]()); // StringIterator {}
      console.log(arr[Symbol.iterator]()); // ArrayIterator {}
      console.log(map[Symbol.iterator]()); // MapIterator {}
      console.log(set[Symbol.iterator]()); // SetIterator {}
      console.log(els[Symbol.iterator]()); // ArrayIterator {}
      //        for-of 循环
      //  数组解构
      //  扩展操作符
      //  Array.from()
      //  创建集合
      //  创建映射
      //  Promise.all()接收由期约组成的可迭代对象
      //  Promise.race()接收由期约组成的可迭代对象
      //  yield*操作符，在生成器中使用
      // 这些原生语言结构会在后台调用提供的可迭代对象的这个工厂函数，从而创建一个迭代器
    </script>
  </body>
</html>
